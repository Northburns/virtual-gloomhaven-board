<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Gloomhaven Board Helper</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/main.min.js"></script>
</head>
<body>
    <div id="elm-node"></div>
    <script>
        document.body.addEventListener("dragstart", event => {
            if (event.target && event.target.draggable) {
                // absurdly, this is needed for Firefox; see https://medium.com/elm-shorts/elm-drag-and-drop-game-630205556d2
                event.dataTransfer.setData("text/html", "blank");
            }
        });

        document.body.addEventListener("dragover", event => {
            // this is needed in order to make dragging work
            return false;
        });

        const app = Elm.Main.init({
            node: document.getElementById("elm-node")
        });

        app.ports.pushGameStatePort.subscribe(function(message) {
            console.log("Port called!");
            console.log(message);
            app.ports.receiveGameState.send(message);
        });
    </script>
</body>
</html>